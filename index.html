<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Danh m·ª•c s·∫£n ph·∫©m</title>
  <link rel="stylesheet" href="style.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
  />
  <script src="./jquery-3.7.1.min.js"></script>
</head>
<body>
  <header class="main-header">
    <div class="top-bar">
      <div class="logo">
        <a href="index.html">
          <img src="imgs/logo.png" alt="Logo" width="150" />
        </a>
      </div>
      <nav class="main-menu">
        <ul>
          <li><a href="#" data-category="vay">ƒê·∫¶M</a></li>
          <li><a href="#" data-category="ao">√ÅO</a></li>
          <li><a href="#" data-category="quan">QU·∫¶N</a></li>
          <li><a href="#" data-category="chanvay">CH√ÇN V√ÅY</a></li>
          <li><a href="#" data-category="aokhoac">√ÅO KHO√ÅC</a></li>
          <li><a href="#">LOOKBOOK</a></li>
          <li><a href="#">RESORT 2025</a></li>
        </ul>
      </nav>
      <div class="header-icons">
        <a href="#"><i class="fa-regular fa-heart"></i> 0</a>
        <a href="cart.html">
          <i class="fa-solid fa-bag-shopping"></i>
          <span
            id="cartCount"
            style="
              position: absolute;
              top: -8px;
              right: -10px;
              background: #000;
              color: #fff;
              font-size: 12px;
              border-radius: 50%;
              padding: 2px 6px;
            "
            >0</span
          >
        </a>
        <a href="dangnhap.html"><i class="fa-regular fa-user"></i></a>
      </div>
    </div>
    <div class="bottom-bar">
      <a href="stores.html"><i class="fa-solid fa-location-dot"></i> H·ªá th·ªëng c·ª≠a h√†ng</a>
      <a href="vanchuyen.html"><i class="fa-solid fa-truck"></i> Th√¥ng tin v·∫≠n chuy·ªÉn</a>
      <a href="chinhsach.html"><i class="fa-solid fa-file-contract"></i> Ch√≠nh s√°ch t√≠ch ƒëi·ªÉm</a>
    </div>
  </header>

  <div class="search-section">
    <img src="imgs/anhnen.jpg" alt="T√¨m ki·∫øm s·∫£n ph·∫©m" class="search-bg" />
    <div class="search-box">
      <div class="search-bar">
        <input type="text" placeholder="B·∫°n mu·ªën t√¨m s·∫£n ph·∫©m g√¨?" />
        <button><i class="fas fa-search"></i> T√¨m ki·∫øm ngay</button>
      </div>
    </div>
  </div>

  <div class="breadcrumb" style="display: none;">
    <a href="index.html">Trang ch·ªß</a> > <span class="current-category"></span>
  </div>

  <div class="products" style="padding: 40px 60px; display: flex; flex-wrap: wrap; gap: 20px;">
    <!-- Render s·∫£n ph·∫©m t·ª´ API t·∫°i ƒë√¢y -->
  </div>

  <footer>
    <div class="footer-container">
        <div class="footer-section">
            <h3>JM DRESS DESIGN</h3>
            <ul>
                <li><a href="#">Gi·ªõi thi·ªáu</a></li>
                <li><a href="#">Tin t·ª©c</a></li>
                <li><a href="#">H·ªá th·ªëng c·ª≠a h√†ng</a></li>
                <li><a href="#">Th√¥ng tin tuy·ªÉn d·ª•ng</a></li>
                <li><a href="#">Li√™n h·ªá h·ª£p t√°c kinh doanh</a></li>
            </ul>
            <img src="imgs/tbao.png" alt="B·ªô C√¥ng Th∆∞∆°ng">
        </div>

        <div class="footer-section">
            <h3>Li√™n k·∫øt v·ªõi ch√∫ng t√¥i</h3>
            <ul class="social-links">
                <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                <li><a href="#"><i class="fab fa-youtube"></i> Youtube</a></li>
                <li><a href="mailto:marketing@jm.com.vn"><i class="fas fa-envelope"></i> Email: marketing@jm.com.vn</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>ChƒÉm s√≥c kh√°ch h√†ng</h3>
            <ul>
                <li><a href="#">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
                <li><a href="#">Ch√≠nh s√°ch t√≠ch ƒëi·ªÉm</a></li>
                <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£ h√†ng</a></li>
                <li><a href="#">Ch·∫ø ƒë·ªô b·∫£o h√†nh tr·ªçn ƒë·ªùi</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>ƒêƒÉng k√Ω mail nh·∫≠n ∆∞u ƒë√£i t·ª´ JM</h3>
            <form>
                <input type="email" placeholder="Nh·∫≠p email c·ªßa b·∫°n">
                <button type="submit">G·ª¨I NGAY</button>
            </form>
            <p>B·∫±ng c√°ch nh·∫•p v√†o n√∫t <a href="#">ƒêƒÉng k√Ω</a>, b·∫°n ƒë·ªìng √Ω v·ªõi <a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a> v√† <a href="#">cookie</a> c·ªßa ch√∫ng t√¥i. Vui l√≤ng <a href="#">ƒêƒÉng nh·∫≠p</a> khi b·∫°n ƒë√£ c√≥ t√†i kho·∫£n.</p>
        </div>
    </div>

    <div class="footer-bottom">
        <p>¬©2009-2021 JM All Rights Reserved</p>
        <div class="payment-methods">
            <p>Ch√∫ng t√¥i nh·∫≠n thanh to√°n qua:</p>
            <img src="imgs/ttoan.png" alt="Payment Methods">
        </div>
    </div>

    <div class="company-info">
        <h3>C√îNG TY C·ªî PH·∫¶N TH∆Ø∆†NG M·∫†I JDD VI·ªÜT NAM</h3>
        <p>Tr·ª• s·ªü ch√≠nh: √î s·ªë 02-NV26, Khu ƒë√¥ th·ªã m·ªõi B·∫Øc qu·ªëc l·ªô 32, Th·ªã tr·∫•n Tr·∫°m Tr√¥i, Huy·ªán Ho√†i ƒê·ª©c, H√† N·ªôi</p>
        <p>Gi·∫•y ch·ª©ng nh·∫≠n ƒêƒÉng k√Ω Kinh doanh s·ªë 0110596586 do S·ªü K·∫ø ho·∫°ch v√† ƒê·∫ßu t∆∞ Th√†nh ph·ªë H√† N·ªôi c·∫•p l·∫ßn ƒë·∫ßu ng√†y 10/01/2024</p>
    </div>
</footer>

  <script>
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById("cartCount").textContent = totalItems;
  }
  updateCartCount();
  window.addEventListener("storage", updateCartCount);

  $(document).ready(async function () {
    // üü¢ G·ªçi API backend ƒë·ªÉ l·∫•y danh s√°ch s·∫£n ph·∫©m
    async function loadProducts() {
      try {
        const res = await fetch("http://localhost:4000/api/v1/client/SanPham/");
        const data = await res.json();
        const container = $(".products");
        container.empty();

        if (data.product && data.product.length > 0) {
          data.product.forEach((p) => {
            const price = (Number(p.price) * 1000).toLocaleString("vi-VN");
            const slug = p.slug || p.name.toLowerCase().replace(/\s+/g, "-"); // fallback n·∫øu ch∆∞a c√≥ slug
            container.append(`
              <div class="product-item" style="width: 23%; text-align:center;">
                <a href="product.html?slug=${slug}"
                   class="product-link"
                   data-slug="${slug}">
                  <img src="${p.image}" alt="${p.name}" style="width:100%;border-radius:8px;">
                </a>
                <p class="product-name" style="margin:8px 0;font-weight:bold;">${p.name}</p>
                <p class="price" style="color:#c00;">${price}ƒë</p>
              </div>
            `);
          });
        } else {
          container.html("<p style='text-align:center;width:100%;'>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o.</p>");
        }
      } catch (err) {
        console.error("L·ªói khi t·∫£i s·∫£n ph·∫©m:", err);
      }
    }

    await loadProducts();
  });
</script>

</body>
</html>
